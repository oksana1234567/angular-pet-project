"use strict";(self.webpackChunkreal_world=self.webpackChunkreal_world||[]).push([[766],{2766:(Q,a,r)=>{r.r(a),r.d(a,{ArticleModule:()=>N});var l=r(9808),m=r(7656),s=r(2382),b=r(1135),h=r(4004),u=r(2340),t=r(1223),p=r(520);let g=(()=>{class i{constructor(e){this.http=e,this.environment=u.N,this.comments$=new b.X([])}getArticleSlug(e){return this.slug=e}getComments(){return this.http.get(`${this.environment.url}/articles/${this.slug}/comments`).pipe((0,h.U)(e=>(e.comments&&e.comments.forEach(n=>this.id=n.id),this.comments$.next(e.comments),e.comments)))}deleteCommentService(){return this.http.delete(`${this.environment.url}/articles/${this.slug}/comments/${this.id}`,{})}postCommentService(e){return this.http.post(`${this.environment.url}/articles/${this.slug}/comments`,{comment:e}).pipe((0,h.U)(n=>n.comments))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(p.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),d=(()=>{class i{constructor(e){this.http=e,this.environment=u.N}follow(e){return this.http.post(`${this.environment.url}/profiles/${e}/follow`,{})}unFollow(e){return this.http.delete(`${this.environment.url}/profiles/${e}/follow`,{})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(p.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var _=r(3450),f=r(9453),C=r(3071);function A(i,o){1&i&&t.GkF(0)}function x(i,o){if(1&i&&(t.TgZ(0,"ul")(1,"li")(2,"p",16),t._uU(3),t.qZA()()()),2&i){const e=o.$implicit;t.xp6(3),t.Oqu(e)}}const w=function(){return["/login"]},k=function(){return["/register"]};function O(i,o){1&i&&(t.TgZ(0,"div")(1,"p",17)(2,"a",18),t._uU(3,"Sign in"),t.qZA(),t._uU(4," or "),t.TgZ(5,"a",18),t._uU(6,"Sign up"),t.qZA(),t._uU(7," to add comments on this article."),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("routerLink",t.DdM(2,w)),t.xp6(3),t.Q6J("routerLink",t.DdM(3,k)))}function M(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",19)(1,"form",20),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw(2).publishComment()}),t.TgZ(2,"blockquote",21),t._UZ(3,"textarea",22),t.qZA(),t.TgZ(4,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).publishComment()}),t._uU(5,"Post Comment"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.newCommentForm)}}function Z(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).deleteComment()}),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",33)(3,"path",34),t.qZA()()}}const $=function(i){return{cardOwnComment:i}};function F(i,o){if(1&i&&(t.TgZ(0,"ul")(1,"li")(2,"div",24)(3,"div",25)(4,"blockquote",21)(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div",26)(8,"div",27)(9,"a",28),t._uU(10),t.qZA(),t.TgZ(11,"p",29),t._uU(12),t.ALo(13,"date"),t.qZA()()(),t.YNc(14,Z,4,0,"button",30),t.qZA()()()()),2&i){const e=o.$implicit,n=t.oxw(3);t.xp6(2),t.Q6J("ngClass",t.VKq(8,$,n.user&&e.author.username===n.user.username)),t.xp6(4),t.Oqu(e.body),t.xp6(4),t.Oqu(e.author.username),t.xp6(2),t.Oqu(t.xi3(13,5,e.createdAt,"longDate")),t.xp6(2),t.Q6J("ngIf",n.user&&e.author.username===n.user.username)}}function S(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,F,15,10,"ul",11),t.qZA()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}const v=function(i,o){return{buttonUn:i,"btn btn-outline-success":o}};function T(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",36)(1,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).onClickFollow()}),t._uU(2),t.qZA(),t.TgZ(3,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).onClickLike()}),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.WLB(5,v,!0===e.isFollow,!1===e.isFollow)),t.xp6(1),t.Oqu(!0===e.isFollow?" - Unfollow":!1===e.isFollow?" + Follow":""),t.xp6(1),t.Q6J("ngClass",t.WLB(8,v,!0===e.isLike,!1===e.isLike)),t.xp6(1),t.AsE("",!0===e.isLike?" - Unfavourite Article":!1===e.isLike?" + Favourite Article":""," ",e.likeCounter,"")}}const y=function(i){return["/editor",i]};function U(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"a",38),t._uU(2,"Edit Article"),t.qZA(),t.TgZ(3,"button",39),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).deleteArticle()}),t._uU(4,"Delete Article"),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("routerLink",t.VKq(1,y,e.article.slug))}}function P(i,o){if(1&i&&(t.YNc(0,T,5,11,"div",35),t.YNc(1,U,5,3,"div",0)),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.user&&e.article.author.username!==e.user.username),t.xp6(1),t.Q6J("ngIf",e.user&&e.article.author.username===e.user.username)}}function L(i,o){if(1&i&&(t.TgZ(0,"div")(1,"section",1)(2,"h2"),t._uU(3),t.qZA(),t.TgZ(4,"div",2)(5,"div",3),t._UZ(6,"img",4),t.TgZ(7,"div",5)(8,"p",6),t._uU(9),t.qZA(),t.TgZ(10,"p",7),t._uU(11),t.ALo(12,"date"),t.qZA()(),t.ynx(13),t.YNc(14,A,1,0,"ng-container",8),t.BQk(),t.qZA()()(),t.TgZ(15,"section",9)(16,"p",10),t._uU(17),t.qZA(),t.YNc(18,x,4,1,"ul",11),t.qZA(),t._UZ(19,"div",12),t.YNc(20,O,8,4,"div",0),t.TgZ(21,"div",13),t.YNc(22,M,6,1,"div",14),t.qZA(),t.YNc(23,S,2,1,"div",0),t.ALo(24,"async"),t.YNc(25,P,2,2,"ng-template",null,15,t.W1O),t.qZA()),2&i){const e=t.MAs(26),n=t.oxw();t.xp6(3),t.Oqu(n.article.title),t.xp6(3),t.s9C("src",n.article.author.image,t.LSH),t.xp6(3),t.Oqu(n.article.author.username),t.xp6(2),t.Oqu(t.xi3(12,10,n.article.createdAt,"longDate")),t.xp6(3),t.Q6J("ngTemplateOutlet",e),t.xp6(3),t.Oqu(n.article.body),t.xp6(1),t.Q6J("ngForOf",n.article.tagList),t.xp6(2),t.Q6J("ngIf",!n.user),t.xp6(2),t.Q6J("ngIf",n.user),t.xp6(1),t.Q6J("ngIf",t.lcZ(24,13,n.comments$))}}const q=[{path:"",component:(()=>{class i{constructor(e,n,c,B,Y,D){this.router=e,this.userService=n,this.articleService=c,this.commentService=B,this.followService=Y,this.likeService=D,this.environment=u.N,this.isFollow=!1,this.isLike=!1,this.subscriptions$=[]}ngOnInit(){this.getSlug(),this.getComments(),this.getArticle(),this.provideUser(),this.newCommentForm=new s.cw({body:new s.NI("")})}getArticle(){this.subscriptionArticle$=this.articleService.getArticle(this.href).subscribe(e=>(this.likeCounter=e.favoritesCount,this.isFollow=e.author.following,this.isLike=e.favorited,this.article=e)),this.subscriptions$.push(this.subscriptionArticle$)}provideUser(){this.userService.getToken()&&(this.subscriptionNewUser$=this.userService.getLoggedUser().subscribe(e=>this.user=e)),this.subscriptions$.push(this.subscriptionNewUser$)}getSlug(){this.href=this.router.url.split("/").slice(-1).toString(),this.articleService.getArticleSlug(this.href),this.commentService.getArticleSlug(this.href)}getComments(){this.comments$=this.commentService.comments$,this.subscriptionComments$=this.commentService.getComments().subscribe(e=>{e.sort((n,c)=>c.createdAt.localeCompare(n.createdAt))}),this.subscriptions$.push(this.subscriptionComments$)}deleteComment(){this.subscriptionCommentsDelete$=this.commentService.deleteCommentService().subscribe(()=>this.getComments()),this.subscriptions$.push(this.subscriptionCommentsDelete$)}publishComment(){this.newCommentForm&&(this.newComment=this.newCommentForm.value),this.subscriptionCommentsPublish$=this.commentService.postCommentService(this.newComment).subscribe(()=>this.getComments()),this.subscriptions$.push(this.subscriptionCommentsPublish$),this.newCommentForm.reset()}onClickFollow(){this.isFollow=!this.isFollow,this.isFollow?this.follow():this.unFollow()}onClickLike(){this.isLike=!this.isLike,this.isLike?this.like():this.likeDelete()}follow(){this.article&&(this.subscriptionFollowing$=this.followService.follow(this.article.author.username).subscribe()),this.subscriptions$.push(this.subscriptionFollowing$)}unFollow(){this.article&&(this.subscriptionUnFollowing$=this.followService.unFollow(this.article.author.username).subscribe()),this.subscriptions$.push(this.subscriptionUnFollowing$)}like(){this.subscriptionLike$=this.likeService.like(this.href).subscribe(()=>this.likeCounter+=1),this.subscriptions$.push(this.subscriptionLike$)}likeDelete(){this.subscriptionDeleteLike$=this.likeService.likeDelete(this.href).subscribe(()=>this.likeCounter-=1),this.subscriptions$.push(this.subscriptionDeleteLike$)}deleteArticle(){this.router.navigateByUrl(""),this.subscriptionDeleteArticle$=this.articleService.deleteArticle().subscribe(),this.subscriptions$.push(this.subscriptionDeleteArticle$)}ngOnDestroy(){this.subscriptions$.forEach(e=>{e&&e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(C.K),t.Y36(_.j),t.Y36(g),t.Y36(d),t.Y36(f.n))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-article"]],features:[t._Bn([_.j,g,d,f.n])],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero"],[1,"aboutAuthor","d-flex","flex-row"],[1,"d-flex","align-items-center"],["alt","",1,"articleAuthorAvatar",3,"src"],[1,"d-flex","flex-column","author"],[1,"articleAuthorName"],[1,"articleDate"],[4,"ngTemplateOutlet"],[1,"article"],[1,"articleBody"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","articleField"],[1,"card"],["class","commentContainer card-body",4,"ngIf"],["estimateTemplate",""],[1,"tag"],[1,"toLogIn"],[1,"action",3,"routerLink"],[1,"commentContainer","card-body"],[3,"formGroup","ngSubmit"],[1,"blockquote"],["rows","5","placeholder","Write your comment","required","","formControlName","body",1,"element","form-control"],["type","button",1,"commentButton","btn","btn-success",3,"click"],[1,"card",3,"ngClass"],[1,"card-body"],[1,"card-header"],[1,"d-flex","flex-row","align-items-center"],["href",""],[1,"articleDateComment"],["class","deleteComment btn btn-outline-dark btn-sm",3,"click",4,"ngIf"],[1,"deleteComment","btn","btn-outline-dark","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"],["fill-rule","evenodd","d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"],["class"," d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-row"],[3,"ngClass","click"],[1,"btn","btn-light",3,"routerLink"],["type","button",1,"btn","btn-light",3,"click"]],template:function(e,n){1&e&&t.YNc(0,L,27,15,"div",0),2&e&&t.Q6J("ngIf",n.article)},directives:[l.O5,l.tP,l.sg,m.yS,s._Y,s.JL,s.sg,s.Fj,s.Q7,s.JJ,s.u,l.mk],pipes:[l.uU,l.Ov],styles:['@charset "UTF-8";.hero[_ngcontent-%COMP%]{background-color:var(--primary-darkBlue-color);color:#fff;padding:1.5rem 0px}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.aboutAuthor[_ngcontent-%COMP%]{margin-left:1.5rem}.aboutAuthor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-left:.2rem}.aboutAuthor[_ngcontent-%COMP%]{margin-left:1.3rem;display:flex;align-items:center}.followBtn[_ngcontent-%COMP%]{margin-left:1.3rem}.likeBtn[_ngcontent-%COMP%]{margin-left:.5rem}.likeBtn[_ngcontent-%COMP%]:before{content:"\\1f49a"}.article[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;height:.1rem;background:var(--primary-light-color);border-radius:.1rem;margin-top:1.3rem;margin-bottom:1.3rem}.toLogIn[_ngcontent-%COMP%]{margin:.5rem 0rem;text-align:center}.blockquote[_ngcontent-%COMP%]{font-size:1rem}.articleDateComment[_ngcontent-%COMP%]{margin-left:.8rem;margin-bottom:0}.articleAuthorAvatar[_ngcontent-%COMP%]{border-radius:50%;height:90%;max-height:2rem;align-items:center}.articleAuthorName[_ngcontent-%COMP%]{color:var(--primary-lightBlue-color)}.commentContainer[_ngcontent-%COMP%]{position:relative;padding-bottom:3rem}.commentButton[_ngcontent-%COMP%]{position:absolute;bottom:.3rem;right:.3rem}.articleDate[_ngcontent-%COMP%]{font-size:.7rem;margin-bottom:0}.card-header[_ngcontent-%COMP%]{font-size:.9rem}.articleBody[_ngcontent-%COMP%]{margin:3rem .5rem;font-size:1.5rem;color:var(--primary-dark-color)}.card[_ngcontent-%COMP%]{margin-top:.8rem}.cardOwnComment[_ngcontent-%COMP%]{position:relative}.deleteComment[_ngcontent-%COMP%]{margin-top:.5rem;position:absolute;right:1rem;top:.2rem}.btn-secondary[_ngcontent-%COMP%]{border-radius:10px}.articleField[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-left:.2rem}.buttonUn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.4rem .9rem;border-radius:.4rem;border:none;background:#1d5f8b;color:#fff}.tag[_ngcontent-%COMP%]{border-color:#ebeeee;background-color:#ebeeee;margin-bottom:.3rem;border-radius:.5rem;display:inline-block;width:auto;padding:.3rem 1rem}.action[_ngcontent-%COMP%]{color:var(--primary-lightBlue-color)}.author[_ngcontent-%COMP%]{margin-right:.8rem}']}),i})()}];let J=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(q)],m.Bz]}),i})(),N=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[l.ez,J,s.UX]]}),i})()}}]);