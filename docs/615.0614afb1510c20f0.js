"use strict";(self.webpackChunkreal_world=self.webpackChunkreal_world||[]).push([[615],{7615:(v,u,s)=>{s.r(u),s.d(u,{EditorModule:()=>b});var a=s(9808),l=s(7656),r=s(2382),p=s(3450),d=s(2340),t=s(1223);function m(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().publish()}),t._uU(2,"Publish Article"),t.qZA()()}}function h(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().update()}),t._uU(2,"Update Article"),t.qZA()()}}function g(i,o){if(1&i&&(t.TgZ(0,"div",9)(1,"p"),t._uU(2),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.AsE("",e.fieldError,": ",e.problemError,"")}}const f=[{path:"",component:(()=>{class i{constructor(e,n,c){this.router=e,this.route=n,this.getArticleService=c,this.environment=d.N,this.subscriptions$=[]}ngOnInit(){this.getSlug(),this.gettingArticleData()}getSlug(){this.route.paramMap.subscribe(e=>{this.slug=e.get("slug")})}gettingArticleData(){this.slug&&(this.subscriptionArticle$=this.getArticleService.getArticle(this.slug).subscribe(e=>{this.article=e,this.generateForm(this.article)})),this.subscriptions$.push(this.subscriptionArticle$),this.updateForm()}generateForm(e){return this.newArticleForm=new r.cw({title:new r.NI(e.title),description:new r.NI(e.description),body:new r.NI(e.body),tagList:new r.NI(e.tagList)})}updateForm(){return this.newArticleForm=new r.cw({title:new r.NI(""),description:new r.NI(""),body:new r.NI(""),tagList:new r.NI("")})}update(){this.newArticle=this.newArticleForm.value.tagList.length?Object.assign(Object.assign({},this.newArticleForm.value),{tagList:this.newArticleForm.value.tagList.split(",")}):Object.assign({},this.newArticleForm.value),this.subscriptionUpdateArticle$=this.getArticleService.postUpdatedArticle(this.newArticle,this.slug).subscribe({next:()=>{},error:e=>{this.fieldError=e.fieldError,this.problemError=e.problemError}}),this.subscriptions$.push(this.subscriptionUpdateArticle$)}publish(){this.newArticle=this.newArticleForm.value.tagList.length?Object.assign(Object.assign({},this.newArticleForm.value),{tagList:this.newArticleForm.value.tagList.split(",")}):Object.assign({},this.newArticleForm.value),this.subscriptionPublishArticle$=this.getArticleService.postArticle(this.newArticle).subscribe(),this.subscriptionArticle$=this.getArticleService.getAllArticles(50,0).subscribe(),this.subscriptions$.push(this.subscriptionPublishArticle$)}ngOnDestroy(){this.subscriptions$.forEach(e=>{e&&e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(p.j))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editor"]],features:[t._Bn([p.j])],decls:9,vars:4,consts:[[1,"elements"],[3,"formGroup"],["type","text","placeholder","Article Title","required","","formControlName","title",1,"form-control","form-control-lg"],["type","text","placeholder","What's this article about?","required","","formControlName","description",1,"form-control"],["rows","10","placeholder","Write your article","required","","formControlName","body",1,"form-control"],["type","text","placeholder","Enter tags","required","","formControlName","tagList",1,"form-control"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"alert","alert-danger"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t._UZ(2,"input",2)(3,"input",3)(4,"textarea",4)(5,"input",5),t.YNc(6,m,3,0,"div",6),t.YNc(7,h,3,0,"div",6),t.YNc(8,g,3,2,"div",7),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.newArticleForm),t.xp6(5),t.Q6J("ngIf",!n.article),t.xp6(1),t.Q6J("ngIf",n.article),t.xp6(1),t.Q6J("ngIf",n.fieldError&&n.problemError))},directives:[r._Y,r.JL,r.sg,r.Fj,r.Q7,r.JJ,r.u,a.O5],styles:[".elements[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-bottom:1.5rem}.elements[_ngcontent-%COMP%]{text-align:center;max-width:80%;margin:auto;margin-top:2rem}"]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[l.Bz.forChild(f)],l.Bz]}),i})(),b=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[a.ez,A,r.UX]]}),i})()}}]);